<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>page.title</title>
    <meta name='description' content='Calipse modern magazine theme for Jekyll'>
    <link rel="canonical" href="index.html">
    <link rel="alternate" type="application/rss+xml" title="Calipse" href="feed.xml">
    <!-- Ionicons -->
    <link href="https://unpkg.com/ionicons@4.5.0/dist/css/ionicons.min.css" rel="stylesheet">
    <link href="https://imrznx.github.io/assets/style.css" rel="stylesheet">
</head>

<body>
    <!-- begin header -->
    <header class="header" id="top">
        <div class="container-big">
            <div class="row">
                <div class="header__inner col col-12">
                    <div class="logo">
                        <a class="logo__link" href="index.html">MoviesKingdom </a>
                    </div>
                    <nav class="main-nav">
                        <div class="main-nav__box">
                            <div class="nav__icon-close">
                                <i class="ion ion-md-close"></i>
                            </div>
                            <div class="nav__title">Menu</div>
                            <ul class="nav__list list-reset">
                                <li class="nav__item">
                                    <a href="index.html" class="nav__link active-link">Home</a>
                                </li>
                                <li class="nav__item"><a href="{{ site.url}}/c/bollywood/"
                                        class="nav__link">Bollywood</a></li>
                                <li class="nav__item"><a href="{{ site.url}}/c/hollywood/"
                                        class="nav__link">Hollywood</a></li>
                                <li class="nav__item dropdown">
                                    <span class="nav__link dropdown-toggle">Pages <i
                                            class="ion ion-ios-arrow-down arrow-down"></i></span>
                                    <div class="dropdown-menu">
                                        <a href="/c/bollywood/" class="nav__link">Bollywood</a>
                                        <a href="/c/hollywood/" class="nav__link">Hollywood</a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </nav>
                    <div class="nav-button">
                        <i class="nav__icon icon__menu ion ion-md-menu"></i>
                        <i class="nav__icon icon__search ion ion-md-search"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- end search -->
    <div class="site-cover">
        <div class="site-cover__image">
            <img class="lazy" data-src="https://calipse-dark.netlify.app/images/bg.jpg">
        </div>
    </div>
    <!-- begin content -->
    <main class="content" aria-label="Content">
        <!-- begin hero -->
        <section class="hero">
            <div class="container">
                <div class="hero__inner">
                    <h1 class="hero__title">page.title</h1>
                </div>
            </div>
        </section>
        <!-- end hero -->
        <!-- begin featured post -->
        <section class="f-post">
            <div class="container">
                <div id="main-div" class="row animate articles-container"></div>
            </div>
        </section>
        <nav class="pagination animate">
            <div class="container">
                <div class="pagination__list" id="pagination"></div>
            </div>
        </nav>
    </main>
    <!-- end content -->
    <div class="top" title="Top"><i class="ion ion-ios-arrow-up"></i></div>
    <!-- begin footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col col-12">
                    <div class="footer__inner">
                        <div class="copyright">2023 &copy; <a href="">Movies Kingdom</a>. Crafted & Designed by <a
                                href="">Rizwan Shaikh</a>.</div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        // Function to generate pagination links
        function generatePagination(currentPage, totalPages) {
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';
    
            let range;
            if (window.innerWidth > 1024) {
                range = 9;
            } else if (window.innerWidth <= 1024 && window.innerWidth > 886) {
                range = 7;
            } else if (window.innerWidth <= 886 && window.innerWidth > 656) {
                range = 5;
            } else {
                range = 3;
            }
    
            // Adjust range based on total pages
            range = Math.min(range, totalPages);
    
            // Add link to go to the first page
            addPageLink(paginationDiv, 1, `<i class="ion ion-ios-arrow-back"></i><i class="ion ion-ios-arrow-back"></i>`);
    
            if (currentPage > 1) {
                addPageLink(paginationDiv, currentPage - 1, `<i class="ion ion-ios-arrow-back"></i>`);
            }
    
            const startRange = Math.max(1, currentPage - Math.floor(range / 2));
            const endRange = Math.min(totalPages, startRange + range - 1);
    
            for (let i = startRange; i <= endRange; i++) {
                if (i === currentPage) {
                    addPageLink(paginationDiv, i, i, 'active-link');
                } else {
                    addPageLink(paginationDiv, i, i, 'mdn');
                }
            }
    
            if (currentPage < totalPages) {
                addPageLink(paginationDiv, currentPage + 1, `<i class="ion ion-ios-arrow-forward"></i>`);
            }
    
            // Add link to go to the last page
            addPageLink(paginationDiv, totalPages, `<i class="ion ion-ios-arrow-forward"></i><i class="ion ion-ios-arrow-forward"></i>`);
        }
    
        function addPageLink(container, page, content, className = '') {
            const pageLink = document.createElement('a');
            pageLink.className = `count-number ${className}`;
            pageLink.href = `javascript:void(0);`;
            pageLink.addEventListener('click', () => fetchData(page));
            pageLink.innerHTML = content;
            container.appendChild(pageLink);
        }
    
        function setActivePageOnLoad() {
            const urlParams = new URLSearchParams(window.location.search);
            const currentPage = parseInt(urlParams.get('p')) || 1;
    
            const paginationLinks = document.querySelectorAll('#pagination .count-number');
            paginationLinks.forEach(link => {
                const pageNumber = parseInt(link.textContent);
                if (pageNumber === currentPage) {
                    link.classList.add('active-link');
                    link.classList.remove('mdn');
                }
            });
        }
    
        let jsonData; // Variable to store the fetched JSON data
    
        async function fetchData(page) {
            try {
                if (!jsonData) {
                    // Fetch the entire data.json file if not already fetched
                    const response = await fetch('/data.json');
                    jsonData = await response.json();
                }
    
                const totalItems = jsonData.length;
                const itemsPerPage = 24;
                const totalPages = Math.ceil(totalItems / itemsPerPage);
    
                const startIndex = (page - 1) * itemsPerPage;
                const endIndex = Math.min(startIndex + itemsPerPage, totalItems);
                const items = jsonData.slice(startIndex, endIndex);
    
                const mainDiv = document.getElementById('main-div');
                mainDiv.innerHTML = '';
    
                items.forEach(item => {
                    const articleDiv = document.createElement('div');
                    articleDiv.className = 'article col col-2 col-m-6 col-d-3';
                    articleDiv.innerHTML = `
                            <div class="inner">
                                <span class="f-post">${item[3]}</span>
                                <a class="a_image" href="${item[0].toLowerCase().split(' ').join('-')}">
                                    <img src="${item[2]}">
                                    <div class="overlay"></div>
                                </a>
                                <div class="a_content">
                                    <h2 class="a_title">
                                        <a href="${item[0].toLowerCase().split(' ').join('-')}">${item[0]}</a>
                                    </h2>
                                </div>
                            </div>
                        `;
                    mainDiv.appendChild(articleDiv);
                });
    
                window.history.pushState({}, '', `?p=${page}`);
    
                window.scrollTo(0, 0);
    
                // After fetching data, generate paginations
                generatePagination(page, totalPages);
    
                // Set active class on the current page on load
                setActivePageOnLoad();
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }
    
        const urlParams = new URLSearchParams(window.location.search);
        let pageParam = urlParams.get('p');
    
        if (!pageParam || isNaN(pageParam)) {
            pageParam = 1;
        }
    
        fetchData(pageParam);
    </script>
    
    <script src="https://imrznx.github.io/assets/js/scripts.js"></script>
</body>

</html>
